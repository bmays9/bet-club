{% extends "base.html" %}
{% load static %}
{% load dict_extras %}
{% block content %}
{% include "season/_season_header.html" %}

<h4>Current Month Standings</h4>
<div class="table-responsive">
    <table class="table small-font table-sm table-striped table-hover table-bordered align-middle text-center">
        <thead class="table-dark">
            <tr class="table-primary">
                <th>Rank</th>
                <th>Player</th>
                <th>Score</th>
            </tr>
        </thead>
        <tbody>
            {% for cms in current_month_scores %}
            <tr>
                <td>{{ cms.player_game__user__username }}</td>
                <td>{{ cms.total_points|floatformat:2 }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3">No scores yet this month.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<h4 class="mt-4">Previous Monthly Winners</h4>
<div class="table-responsive">
    <table class="table small-font table-sm table-striped table-hover table-bordered align-middle text-center">
        <thead class="table-dark">
            <tr class="table-primary">
                <th>Month</th>
                <th>Winner</th>
                <th>Prize</th>
            </tr>
        </thead>
        <tbody>
            {% for payout in previous_winners %}
            <tr>
                <td>{{ payout.awarded_for_month|date:"F Y" }}</td>
                <td>{{ payout.recipient.user.username }}</td>
                <td>{{ payout.calculate_prize(payout.prize_pool.game.players.count)|floatformat:2 }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="3">No monthly winners yet.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}

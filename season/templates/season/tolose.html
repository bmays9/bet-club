{% extends "base.html" %}

{% load static %}
{% load dict_extras %}

{% block content %}

{% include "season/_season_header.html" %}

<h5 class="mt-4">Best Picks</h5>
<!-- Responsive Table -->
<div class="table-responsive">
    <table class="table table-sm small-font table-striped table-hover table-bordered align-middle text-center">
        <thead class="table-dark">
            <tr class="table-primary">
                <th>Team</th>
                <th>Player</th>
                <th>League</th>
                <th>Type</th>
                <th>Pld</th>
                <th>Pts</th>
                <th>£</th>
            </tr>
        </thead>
        <tbody>
            {% for pick in teams %}
            <tr {% if user == pick.player_game.user %}class="table-info" {% endif %}>
                <td>{{ pick.team.name }}</td>
                <td>{{ pick.player_game.user.username }}</td>
                <td>{{ pick.league }}</td>
                <td>{{ pick.pick_type }}</td>
                <td>{{ pick.games_played }}</td>
                <td>{{ pick.total_points|floatformat:0 }}</td>
                <td class="{% if pick.prize > 0 %}table-success{% endif %}">
                    {% if pick.prize > 0 %}
                    £{{ pick.prize|floatformat:0 }}
                    {% else %}

                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% if worst_teams %}
<h5 class="mt-4">Worst Picks</h5>
<div class="table-responsive">
    <table class="table table-sm small-font table-striped table-hover table-bordered align-middle text-center">
        <thead class="table-dark">
            <tr class="table-primary">
                <th>Team</th>
                <th>Player</th>
                <th>League</th>
                <th>Type</th>
                <th>Pld</th>
                <th>Pts</th>
                <th>£</th>
            </tr>
        </thead>
        <tbody>
            {% for pick in worst_teams %}
            <tr {% if user == pick.player_game.user %}class="table-info" {% endif %}>
                <td>{{ pick.team.name }}</td>
                <td>{{ pick.player_game.user.username }}</td>
                <td>{{ pick.league }}</td>
                <td>{{ pick.pick_type }}</td>
                <td>{{ pick.games_played }}</td>
                <td>{{ pick.total_points|floatformat:0 }}</td>
                <td class="{% if pick.prize > 0 %}table-danger{% endif %}">
                    {% if pick.prize > 0 %}
                    - £{{ pick.prize|floatformat:0 }}
                    {% else %}

                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}

<p class="text-muted small mt-2">As of: {{ batch.taken_at|date:"Y-m-d H:i" }}</p>

{% endblock content %}

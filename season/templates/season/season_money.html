{% extends "base.html" %}
{% load static %}
{% block content %}
{% include "season/_season_header.html" %}

<h3 class="mt-3">Money</h3>

<div class="table-responsive">
    {% for category, items in grouped_payouts.items %}
    {% if items %}
    <h5 class="mt-4">{{ category }}</h5>

    <table class="table table-sm table-striped table-hover table-bordered align-middle text-center small-font">
        <thead class="table-dark">
            <tr>
                <th style="width:60px;">Rank</th>
                <th>Pool</th>
                <th>League</th>
                <th>Player</th>
                <th>Team / Pick</th>
                <th>Points</th>
                <th style="width:120px;">Prize</th>
            </tr>
        </thead>
        <tbody>
            {% for it in items %}
            <tr>
                <td>{{ it.rank|default:"." }}</td>
                <td>{{ it.prize_pool.name }}</td>
                <td>{% if it.league %}{{ it.league.code }}{% else %}&ndash;{% endif %}</td>
                <td>
                    {% if it.recipient %}
                    {{ it.recipient.user.username }}
                    {% else %}
                    &ndash;
                    {% endif %}
                </td>
                <td>
                    {% if it.winning_pick %}
                    {{ it.winning_pick.team.name }}
                    {% else %}
                    &ndash;
                    {% endif %}
                </td>
                <td>{{ it.points|default:"." }}</td>
                <td>
                    {% if it.prize_value is not None %}
                    &pound;{{ it.prize_value|floatformat:0 }}
                    {% else %}
                    &ndash;
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
    {% endfor %}
</div>

{% endblock %}
